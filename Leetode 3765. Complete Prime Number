class Solution {
public:
    bool check(int x){
        if(x<=1) return false;
        if(x==2) return true;
        if(x%2==0) return false;
        for(int i=3; i*i<=x; i+=2){
            if(x%i==0) return false;
        }
        return true;
    }
    bool completePrime(int num) {
        if(num<=1) return false;
        if(num%2==0 && num!=2) return false;
        string s = to_string(num);
        if(s.length()==1){
            return check(num);
        }

        vector<int> suffix;
        suffix.push_back(num);
        long long x = 10;
        long long limit = (long long)num*10;
        while(x<=limit){
            suffix.push_back(num%x);
            x *= 10;
        }

        int p = 0;
        vector<int> prefix;
        for(int i=0; i<s.length(); i++){
            p = p*10+(s[i]-'0');
            prefix.push_back(p);
        }

        for(int i=0; i<suffix.size(); i++){
            if(!check(suffix[i])) return false;
        }
        for(int i=0; i<prefix.size(); i++){
            if(!check(prefix[i])) return false;
        }

        return true;
    }
};
